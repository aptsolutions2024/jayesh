<?phpsession_start();if(isset($_SESSION['log_id'])&&$_SESSION['log_id']==''){    header("/home");}include("../lib/connection/db-config.php");include("../lib/class/user-class.php");include("../lib/class/common.php");$userObj=new user();$common=new common();include_once('../paginate.php');$comp_id=$_SESSION['comp_id'];$user_id=$_SESSION['log_id'];/* pagination starts */$per_page =10;         // number of results to show per page//$sql ="select * from "//$result = $userObj->showDepartment($comp_id);$result = $userObj->selectClientEmployee($comp_id);//$allclients = $userObj->showClient1($comp_id,$user_id);$allclients = $common->showEmersionClient($comp_id,$user_id);$alldesign = $userObj->showDesignation($comp_id);$total_results = mysql_num_rows($result);$total_pages = ceil($total_results / $per_page);//total pages we going to have$show_page="";//-------------if page is setcheck------------------//if($show_page ==""){    $show_page =1;}if (isset($_POST['page'])) {    $show_page = $_POST['page'];             //it will telles the current page    if ($show_page > 0 && $show_page <= $total_pages) {        $start = ($show_page - 1) * $per_page;        $end = $start + $per_page;    } else {        // error - show first set of results        $start = 0;        $end = $per_page;    }} else {    // if page isn't set, show first set of results    $start = 0;    $end = $per_page;}// display pagination$tpages=$total_pages;if (isset($page) && $page <= 0)    $page = 1;?><!DOCTYPE html><head>  <meta charset="utf-8"/>      <!-- Set the viewport width to device width for mobile -->  <meta name="viewport" content="width=device-width"/>  <title>Client Employee | Department</title>  <!-- Included CSS Files -->  <link rel="stylesheet" href="../css/responsive.css">  <link rel="stylesheet" href="../css/style.css">    <script type="text/javascript" src="../js/jquery.min.js"></script><script>    function clear() {        $('#clienterror').html("");		$('#designerror').html("");		$('#noofemployeeerror').html("");   }      function updateClientEmployee(id){	   clear();      //$('#success1').hide();        var client = $("#client").val();		var design = $("#design").val();		var noofemployee = $("#noofemployee").val();		var rid = $("#rid").val();			      if(client=='0'){          $('#clienterror').html("Please Select the Client");          $('#clienterror').show();          $("#client").focus();          $("#success").hide();      }      else if(design=='0')      {          $('#designerror').html("Please Select Department Name");          $('#designerror').show();          $("#design").focus();          $("#success").hide();      }else if(noofemployee=='')      {          $('#noofemployeeerror').html("Please Enter the Employee number");          $('#noofemployeeerror').show();          $("#noofemployee").focus();          $("#success").hide();      }else if(isNaN(noofemployee)== true)      {          $('#noofemployeeerror').html("Please Enter the Valid Employee number");          $('#noofemployeeerror').show();          $("#noofemployee").focus();          $("#success").hide();      }          else {              $.post('/edit_mast_client_employee_process',{                  'client':client,				  'design':design,				  'noofemployee':noofemployee,				  'rid':rid              },function(data){                  $('#error').hide();                 $("#success").html('Record Updated successfully<br/><br/>');                  $("#success").show();                  $("#form").trigger('reset');                 $("#dispaly").load(document.URL +  ' #listdiv');				                });			  }  }    function saveClientEmployee(){       clear();      //$('#success1').hide();        var client = $("#client").val();		var design = $("#design").val();		var noofemployee = $("#noofemployee").val();		      if(client=='0'){          $('#clienterror').html("Please Select the Client");          $('#clienterror').show();          $("#client").focus();          $("#success").hide();      }      else if(design=='0')      {          $('#designerror').html("Please Select Department Name");          $('#designerror').show();          $("#design").focus();          $("#success").hide();      }else if(noofemployee=='')      {          $('#noofemployeeerror').html("Please Enter the Employee number");          $('#noofemployeeerror').show();          $("#noofemployee").focus();          $("#success").hide();      }else if(isNaN(noofemployee)== true)      {          $('#noofemployeeerror').html("Please Enter the Valid Employee number");          $('#noofemployeeerror').show();          $("#noofemployee").focus();          $("#success").hide();      }          else {              $.post('/add_mast_client_employee_process',{                  'client':client,				  'design':design,				  'noofemployee':noofemployee              },function(data){                   $('#error').hide();                 $("#success").html('Record Insert successfully<br/><br/>');                  $("#success").show();                  $("#form").trigger('reset');                 $("#dispaly").load(document.URL +  ' #listdiv');              });			  }  }  function getdesignation(val){	 	if(val !="0"){	  $.post(/'getdesignation',{				  'cid':val			  },function(data){				 $("#designdiv").html(data);			  });	  }  }  function editEmployee(id){ 	   $.post('/get_edit_client_employee_details',{				  'id':id			  },function(data){				 $("#form").html(data);	 			  });	  }function getdesignation1(val,id){		if(val !="0"){	  $.post('/getdesignation',{		  'cid':val,		  'id':id,	  },function(data){		 $("#designdiv").html(data);			  });	}}function deleteClientEmployee(vid){		if(vid !="0"){		if(confirm('Are you You Sure want to delete this Field?')) {	  $.post('/delete_client_employee',{		  'id':vid	  },function(data){				$("#form").trigger('reset');		 $('#error').hide();         $("#success").html('Record Deleted successfully<br/><br/>');         $("#success").show();		 $("#dispaly").load(document.URL +  ' #listdiv');	  });	}	}}    </script></head> <body><!--Header starts here--><?php include('header.php');?><!--Header end here--><div class="clearFix"></div><!--Menu starts here--><?php include('menu.php');?><!--Menu ends here--><div class="clearFix"></div><!--Slider part starts here--><div class="twelve mobicenter innerbg">    <div class="row">        <div class="twelve" id="margin1"><h3 id="pgtit">Add Emerson Employee</h3></div>        <div class="clearFix"></div>        <form method="post"  id="form">        <div class="twelve" id="margin1">            <div class="twelve padd0 columns successclass hidecontent" id="success">            </div>            <div class="clearFix"></div>                        			<div class="four padd0 columns">				<div class="four padd0 columns"><span class="labelclass">Client :</span></div>				<div class="seven padd0 columns">				<select name="client" id="client" class="textclass" onChange="getdesignation(this.value);">				<option value="0">Select Client</option>				<?php  				foreach($allclients as $client){?>				<option value="<?php echo $client['mast_client_id'];?>"><?php echo $client['client_name'];?></option>				<?php } ?>				</select>                <span class="errorclass hidecontent" id="clienterror"></span></div>               <div class="one padd0 columns"></div>                           </div>			<div class="four padd0 columns">				<div class="four padd0 columns"><span class="labelclass">Designation :</span></div>				<div class="seven padd0 columns" ><span id="designdiv"><select name="design" id="design" class="textclass"><option value="">Please select Designation</option></select></span> 				                <span class="errorclass hidecontent" id="designerror"></span></div>               <div class="one padd0 columns"></div>            </div>			<div class="four padd0 columns">				<div class="four padd0 columns"><span class="labelclass">No. Employee :</span></div>				<div class="seven padd0 columns"> <input type="text" name="noofemployee" id="noofemployee" placeholder="Number of Employee" class="textclass">                <span class="errorclass hidecontent" id="noofemployeeerror"></span></div>               <div class="one padd0 columns"></div>                           </div>                        <div class="clearFix"></div>			<div class="four padd0 columns" id="margin1">			<div class="four padd0 columns" id="margin1">						</div>			<div class="eight padd0 columns" id="margin1">				<input type="button" name="submit" id="submit" value="Save" class="btnclass" onclick="saveClientEmployee();">			</div>			</div>                         <div class="eight padd0 columns" id="margin1">            </div>            <div class="clearFix"></div>            </form>        </div>        <div class="twelve" id="margin1">            <h3>Display Emerson Employee</h3>        </div>         <hr>    <span class="successclass hidecontent" id="success1"></span>        <div class="twelve" id="margin1" style="background-color: #fff;" >            <div id="dispaly">            <table width="100%" id="listdiv">                    <tr>                        <th align="left" width="5%">Sr.No</th>                        <th align="left" width="35%">Designation</th>						<th align="left" width="35%">Client</th>						<th align="left" width="15%">No. of Employee</th>                        <th align="center" width="10%">Action</th>                    </tr>                <?php                $count=1;                for ($i = $start; $i < $end; $i++) {                $cls = $i;                // make sure that PHP doesn't try to show results that don't exist                if ($i == $total_results) {                  //  $count=1;                    break;                }				                ?>                    <tr>                        <td class="tdata"><?php echo $i+1;?></td>                        <td class="tdata"><?php  echo mysql_result($result, $i, 'client_name');//echo $row['name'];?></td>						<td class="tdata"><?php  echo mysql_result($result, $i, 'mast_desg_name');//echo $row['name'];?></td>						<td class="tdata"><?php  echo mysql_result($result, $i, 'no_of_employee');//echo $row['name'];?></td>                        <td class="tdata" align="center">  <a href="javascript:void(0)" onclick="editEmployee(<?php echo mysql_result($result, $i, 'id');?>)">                        <img src="../images/edit-icon.png" /></a>                         <a href="javascript:void(0);" onclick="deleteClientEmployee(<?php echo  mysql_result($result, $i, 'id');?>)">                                <img src="../images/delete-icon.png" /></a></td>                    </tr>                <?php                    $count++;                } ?>                <?php if($total_results == 0){?>                <tr align="center">                    <td colspan="5" class="tdata errorclass">                        <span class="norec">No Record found</span>                    </td>                <tr>                    <?php }?>            </table>                <div class="pagination" align="right">                    <?php                    $reload=$page."?pages=". $tpages;                    if ($total_pages > 1) {                        echo paginate($reload, $show_page, $total_pages);                    }?>                </div>            </div></div></div></div><br/><!--Slider part ends here--><div class="clearFix"></div><!--footer start --><?php include('footer.php');?><!--footer end --></body></html>