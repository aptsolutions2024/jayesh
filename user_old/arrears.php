<?phpsession_start();if(isset($_SESSION['log_id'])&&$_SESSION['log_id']==''){    header("/home");}include("../lib/connection/db-config.php");include("../lib/class/user-class.php");$userObj=new user();$comp_id=$_SESSION['comp_id'];$user_id=$_SESSION['log_id'];$result1 = $userObj->showClient1($comp_id,$user_id);$_SESSION['month']='current';$leavetypes = $userObj->showLeavetype($comp_id);?><!DOCTYPE html><head>  <meta charset="utf-8"/>  <!-- Set the viewport width to device width for mobile -->  <meta name="viewport" content="width=device-width"/>  <title>Leave | Arrears</title>  <!-- Included CSS Files -->  <link rel="stylesheet" href="../css/responsive.css">  <link rel="stylesheet" href="../css/style.css">    <link rel="stylesheet" href="../css/jquery-ui.css">    <script type="text/javascript" src="../js/jquery.min.js"></script>    <script type="text/javascript" src="../js/jquery-ui.js"></script>		 <body><!--Header starts here--><?php include('header.php');?><!--Header end here--><div class="clearFix"></div><!--Menu starts here--><?php include('menu.php');?><!--Menu ends here--><div class="clearFix"></div><!--Slider part starts here--><div class="twelve mobicenter innerbg">    <div class="row">        <div class="twelve" id="margin1"> <h3>Arrears</h3></div>        <div class="clearFix"></div>		<form method="post"  action="/add_arrears_process" id="addarreas">        <div class="twelve" id="margin1">                        <div class="six padd0 columns"  >			<div class="three   columns"  >                <span class="labelclass1">Client :</span>            </div>			<div class="eight padd0  columns" >                <select class="textclass" name="client" id="client" onchange="chagename()">                    <option value="">--Select--</option>                    <?php while($row1=mysql_fetch_array($result1)){?>                        <option value="<?php echo $row1['mast_client_id']; ?>"><?php echo $row1['client_name']; ?></option>                    <?php } ?>                </select>                <span class="errorclass hidecontent" id="clinterror"></span>			</div>			<div class="one padd0 columns" ></div>            </div>            <div class="six padd0 columns"  >				<div class="three  columns "  >					Employee name					<!--<input type="radio" name="emp" value="all" onclick="changeemp(this.value);" checked id="all">All                <input type="radio" name="emp" value="random" onclick="changeemp(this.value);" id="Random">Random-->				</div>				<div class="nine columns"  >					 <div id="showemp" >                    <input type="text" name="name" id="name" onkeyup="serachemp(this.value);" autocomplete="off" placeholder="Enter the Employee Name" class="textclass" >                    <div id="searching" style="z-index:10000;position: absolute;width: 100%;border: 1px solid rgba(151, 151, 151, 0.97);display: none;background-color: #FFFFFF;">                    </div>                    <input type="hidden" name="empid" id="empid" value="">					</div>										<span class="errorclass hidecontent" id="emperror"></span>				</div>				<div class="one padd0  columns"  >				</div>			</div>			<div class="clearFix">&nbsp;</div>			<div class="four padd0 columns">					<div class="five  columns " >                        <span class="labelclass1">Date </span>                    </div>					<div class="seven columns" >                       <input type="text" name="dt" id="dt" class="textclass" >					  <span class="errorclass hidecontent" id="dterror"></span>                    </div>								</div>			<span id="dates">           <div class="four padd0 columns"  >                                    <div class="five  columns " >                        <span class="labelclass1"> &nbsp; From Date</span>                    </div>                    <div class="seven columns">                        <input type="text" name="frdt" id="frdt" class="textclass" >                        <span class="errorclass hidecontent" id="frdterror"></span>                    </div>             </div>			 <div class="four padd0 columns"  >			 <div class="five  columns pdl10p" id = "prv_to" >                        <span> To Date</span>                    </div>                    <div class="seven columns" >                        <input type="text" name="todt" id="todt" class="textclass" >                        <span class="errorclass hidecontent" id="todterror"></span>                    </div>								</div>			</span>			<div class="clearFix">&nbsp;</div>			  <div class="row" align="right">			  <div class="twelve columns ">			   <div class="twelve  columns"  >			  <button  class="btnclass" onclick="showList1();">Show</button>			  </div>			  </div>			 </div>						<div class="clearFix"></div>			        </div>		<div class="clearFix">&nbsp;</div>		<div id="showlist" class="hidecontent">				<div class="clearFix">&nbsp;</div>		<div class="rows" >		 <h3>Display Employee</h3>		 </div>		 <hr>		 <div id="displaydetails"></div>		</div>		</form><div id="test"></div>	       <div class="clearFix">&nbsp;</div>         <div class="clearFix"></div>		<div id="contenlist234"></div>            <div class="clearFix"></div>            <br/>        </div>    </div>    </div></div><!--Slider part ends here--><div class="clearFix"></div><!--footer start --><?php include('footer.php');?><!--footer end -->    <script>	$( function() {            $("#frdt").datepicker({                changeMonth: true,                changeYear: true,                dateFormat:'dd-mm-yy'            });            $("#todt").datepicker({                changeMonth: true,                changeYear: true,                dateFormat:'dd-mm-yy'            });			 $("#dt").datepicker({                changeMonth: true,                changeYear: true,                dateFormat:'dd-mm-yy'			});	});		 function changeemp(val){		 var client = $("#client").val();		 if(val=='random'){			if(client==""){				$("#clinterror").show();				$("#clinterror").text("Please Select Client");				$("#all").prop("checked", true);				return false;			}else{				$("#clinterror").hide();			}				$("#showemp").show();			$("#subbtn").show();			        }		        else if(val=='all')        {$("#showemp").hide();			$("#subbtn").show();			$("#empid").val('');        }    }	function serachemp(val){		var clientid = $("#client").val();		        $.post('/display_employee2', {            'name': val,			'clientid':clientid        }, function (data) {            $('#searching').html(data);            $('#searching').show();			        });    }	function showTabdata(id,name){        $.post('/display_employee', {            'id': id        }, function (data) {            $('#searching').hide();            $('#displaydata').html(data);            $('#name').val(name);            $('#displaydata').show();            document.getElementById('empid').value=id;        });    }	function clear(){		$("#clinterror").hide();		$("#emperror").hide();		$("#dterror").hide();		$("#frdterror").hide();		$("#todterror").hide();		$("#succerr").hide();	}	function showList1(){		var client = $("#client").val();		 var emp = $('input:radio[name=emp]:checked').val();		 var empid = $("#empid").val();		 var dt = $("#dt").val();		 var frdt = $("#frdt").val();		 var todt = $("#todt").val();		 var name = $("#name").val();		 backway1 = frdt.split("-").reverse().join("");		 backway2 = todt.split("-").reverse().join("");		 clear();		 		 if(client ==""){			 $("#clinterror").show();			 $("#clinterror").text("Please select Client");			 return false;		 }else if(name ==""){			 $("#emperror").show();			 $("#emperror").text("Please select name");			  return false;		 }else if(dt ==""){			 $("#dterror").show();			 $("#dterror").text("Please select date");			  return false;		 }else if(frdt ==""){			 $("#frdterror").show();			 $("#frdterror").text("Please select from date");			  return false;		 }else if(todt ==""){			 $("#todterror").show();			 $("#todterror").text("Please select To date");			  return false;		 }else if(backway1 > backway2){			 $("#frdterror").show();			 $("#frdterror").text("From date is not greater than to date");			  return false;		 }		 		 $.post('/get_arreas_month_details', {			 'client': client,			 'emp':emp,             'empid':empid,			 'frdt':frdt,			 'todt':todt	 		}, function (data) {				$("#showlist").show();			$("#displaydetails").html('');						   $("#displaydetails").html(data);		  		   		});	}	function calculateAmt(id){				var val1 = $("#stamt"+id).val();		if(val1!=""){		var caltype = $("#caltype"+id).val();				//if(caltype=="2"){ 					calcamt1 = parseFloat(val1);		//}		var calcamt = $("#calamo"+id).val(calcamt1);		var amt = $("#amt"+id).text();					var diff = parseFloat(calcamt1)-parseFloat(amt);			$("#caldiff"+id).val(diff);		}		allDifferenceCalculation();		monthwiseCal();	}	function chagename(){		$("#name").val('');		$("#empid").val('');	}	function allDifferenceCalculation(){		var sum = 0;		var tmp =0;		$('.diffcal').each(function(){			tmp =$(this).val();			if(tmp==""){tmp=0;}			sum += parseFloat(tmp); 		});		$("#grndtotal").text(sum);		$("#grnttotval").val(sum);			}	function checkAll(){		 if(document.getElementById('allcheck').checked){						 $(".selectchk" ).prop( "checked", true );		 }else{			 $(".selectchk" ).prop( "checked", false );		 }			 }	 function monthwiseCal(){		var totmon = $("#totmon").val();					for(i=0; i<totmon;i++){			var sum1 = 0;			var tmp =0;			$(".monsum"+i).each(function(){				tmp =$(this).val();				if(tmp==""){tmp=0;}				sum1 += parseFloat(tmp); 			});						$("#total"+i).text(sum1);		}	}</script><script>$(document).ready(function() {    $('#addarreas').on('submit',function(){        var form = $(this);        $.ajax({            type:'post',            url:'/add_arrears_process',            dataType: "text",            data: form.serialize(),            success: function(result){				$("#test").html(result);				//result = result.trim();				$("#succerr").show();                            }        });        // Prevents default submission of the form after clicking on the submit button.         return false;       });});</script>	</body></html>